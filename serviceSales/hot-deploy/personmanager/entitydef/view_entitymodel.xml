<?xml version="1.0" encoding="UTF-8"?>
<entitymodel xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:noNamespaceSchemaLocation="http://ofbiz.apache.org/dtds/entitymodel.xsd">
    <!-- ========================================================= -->
    <!-- ======================== Defaults ======================= -->
    <!-- ========================================================= -->
    <title>VIEW Entity of PersonManager Component</title>
    <description>None</description>
    <copyright>S</copyright>
    <version>1</version>
    <!-- Tele & Party View -->
    <view-entity entity-name="TelecomNumberAndPartyView" package-name="com.banfftech.personerp">
        <member-entity entity-alias="PCM" entity-name="PartyContactMech"/>
        <member-entity entity-alias="PCMP" entity-name="PartyContactMechPurpose"/>
        <member-entity entity-alias="CM" entity-name="ContactMech"/>
        <member-entity entity-alias="TN" entity-name="TelecomNumber"/>
        <alias entity-alias="PCM" name="partyId" field="partyId"/>
        <alias entity-alias="PCM" name="fromDate" field="fromDate"/>
        <alias entity-alias="PCM" name="thruDateParty" field="thruDate"/>
        <alias entity-alias="PCMP" name="thruDatePartyPu" field="thruDate"/>
        <alias entity-alias="PCMP" name="contactMechPurposeTypeId" field="contactMechPurposeTypeId"/>
        <alias entity-alias="CM" name="contactMechTypeId" field="contactMechTypeId"/>
        <alias entity-alias="TN" name="contactNumber" field="contactNumber"/>
        <view-link entity-alias="PCM" rel-entity-alias="PCMP">
            <key-map field-name="partyId" rel-field-name="partyId"/>
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
            <entity-condition>
                <condition-list>
                    <condition-expr entity-alias="PCM" field-name="thruDate" operator="equals" value=""/>
                    <condition-expr entity-alias="PCMP" field-name="thruDate" operator="equals" value=""/>
                </condition-list>
            </entity-condition>
        </view-link>
        <view-link entity-alias="PCM" rel-entity-alias="CM">
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
        </view-link>
        <view-link entity-alias="PCM" rel-entity-alias="TN">
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
        </view-link>
        <entity-condition>
            <order-by field-name="-fromDate"/>
        </entity-condition>
    </view-entity>
    <!-- Email & Party -->
    <view-entity entity-name="EmailAndPartyView" package-name="com.banfftech.personerp">
        <member-entity entity-alias="PCM" entity-name="PartyContactMech"/>
        <member-entity entity-alias="PCMP" entity-name="PartyContactMechPurpose"/>
        <member-entity entity-alias="CM" entity-name="ContactMech"/>
        <alias entity-alias="PCM" name="partyId" field="partyId"/>
        <alias entity-alias="PCM" name="fromDate" field="fromDate"/>
        <alias entity-alias="PCM" name="thruDateParty" field="thruDate"/>
        <alias entity-alias="PCMP" name="thruDatePartyPu" field="thruDate"/>
        <alias entity-alias="PCMP" name="contactMechPurposeTypeId" field="contactMechPurposeTypeId"/>
        <alias entity-alias="CM" name="infoString" field="infoString"/>
        <alias entity-alias="CM" name="contactMechTypeId" field="contactMechTypeId"/>
        <view-link entity-alias="PCM" rel-entity-alias="PCMP">
            <key-map field-name="partyId" rel-field-name="partyId"/>
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
            <entity-condition>
                <condition-list>
                    <condition-expr entity-alias="PCM" field-name="thruDate" operator="equals" value=""/>
                    <condition-expr entity-alias="PCMP" field-name="thruDate" operator="equals" value=""/>
                </condition-list>
            </entity-condition>
        </view-link>
        <view-link entity-alias="PCM" rel-entity-alias="CM">
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
        </view-link>
        <entity-condition>
            <order-by field-name="-fromDate"/>
        </entity-condition>
    </view-entity>
    <!-- Postal Address & Party -->
    <view-entity entity-name="PostalAddressAndPartyView" package-name="com.banfftech.personerp">
        <member-entity entity-alias="PCM" entity-name="PartyContactMech"/>
        <member-entity entity-alias="PCMP" entity-name="PartyContactMechPurpose"/>
        <member-entity entity-alias="CM" entity-name="ContactMech"/>
        <member-entity entity-alias="PA" entity-name="PostalAddress"/>
        <member-entity entity-alias="G" entity-name="Geo"/>
        <alias entity-alias="PCM" name="partyId" field="partyId"/>
        <alias entity-alias="PCM" name="fromDate" field="fromDate"/>
        <alias entity-alias="PCM" name="thruDateParty" field="thruDate"/>
        <alias entity-alias="PCMP" name="thruDatePartyPu" field="thruDate"/>
        <alias entity-alias="PCMP" name="contactMechPurposeTypeId" field="contactMechPurposeTypeId"/>
        <alias entity-alias="CM" name="contactMechTypeId" field="contactMechTypeId"/>
        <alias entity-alias="PA" name="address1" field="address1"/>
        <alias entity-alias="PA" name="address2" field="address2"/>
        <alias entity-alias="PA" name="city" field="city"/>
        <alias entity-alias="PA" name="stateProvinceGeoId" field="stateProvinceGeoId"/>
        <alias entity-alias="G" name="geoName" field="geoName"/>
        <view-link entity-alias="PCM" rel-entity-alias="PCMP">
            <key-map field-name="partyId" rel-field-name="partyId"/>
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
            <entity-condition>
                <condition-list>
                    <condition-expr entity-alias="PCM" field-name="thruDate" operator="equals" value=""/>
                    <condition-expr entity-alias="PCMP" field-name="thruDate" operator="equals" value=""/>
                </condition-list>
            </entity-condition>
        </view-link>
        <view-link entity-alias="PCM" rel-entity-alias="CM">
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
        </view-link>
        <view-link entity-alias="PCM" rel-entity-alias="PA">
            <key-map field-name="contactMechId" rel-field-name="contactMechId"/>
        </view-link>
        <view-link entity-alias="PA" rel-entity-alias="G">
            <key-map field-name="stateProvinceGeoId" rel-field-name="geoId"/>
        </view-link>
        <entity-condition>
            <order-by field-name="-fromDate"/>
        </entity-condition>
    </view-entity>


    <!--头像*新)-->
    <view-entity entity-name="PartyContentAndDataResource" package-name="com.banfftech.personerp">
        <member-entity entity-name="Content" entity-alias="Content" />
        <member-entity entity-name="PartyContent" entity-alias="PartyContent" />
        <member-entity entity-name="DataResource" entity-alias="DataResource" />

        <alias entity-alias="DataResource" field="objectInfo" name="objectInfo"/>
        <alias entity-alias="PartyContent" field="partyContentTypeId" name="partyContentTypeId"/>
        <alias entity-alias="PartyContent" field="fromDate" name="fromDate"/>
        <alias entity-alias="PartyContent" field="partyId" name="partyId"/>


        <alias entity-alias="DataResource" field="dataResourceId" name="dataResourceId"/>

        <alias entity-alias="Content" field="contentId" name="contentId"/>


        <alias entity-alias="PartyContent" field="thruDate" name="thruDate"/>


        <view-link entity-alias="Content" rel-entity-alias="PartyContent">
            <key-map rel-field-name="contentId" field-name="contentId"/>
        </view-link>

        <view-link entity-alias="Content" rel-entity-alias="DataResource">
            <key-map rel-field-name="dataResourceId" field-name="dataResourceId"/>
        </view-link>



    </view-entity>




    <!-- 查询 消息列表的视图 , 非常痛苦  -->
    <view-entity entity-name="MessageLogView" package-name="com.banfftech.personerp">
    <member-entity entity-name="MessageLog" entity-alias="ML" />
        <alias-all entity-alias="ML"/>
        <alias name="partyIdFrom" field="partyIdFrom" group-by="true" entity-alias="ML"/>
        <alias name="partyIdTo" field="partyIdTo" group-by="true" entity-alias="ML"/>
    </view-entity>





</entitymodel>