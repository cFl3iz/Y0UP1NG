<?xml version="1.0" encoding="UTF-8"?>
<screens xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="http://ofbiz.apache.org/Widget-Screen" xsi:schemaLocation="http://ofbiz.apache.org/Widget-Screen http://ofbiz.apache.org/dtds/widget-screen.xsd">

    <screen name="main">
        <section>
            <actions>
                <set field="headerItem" value="main"/><!-- this highlights the selected menu-item with name "main" -->
            </actions>
            <widgets>
                <decorator-screen name="WebManagerCommonDecorator" location="${parameters.mainDecoratorLocation}">
                    <decorator-section name="body">
                    </decorator-section>
                </decorator-screen>
            </widgets>
        </section>
    </screen>



    <!-- miniChat -->
    <screen name="miniChat">
        <section>
            <actions>

                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>
                <set field="productId" value="${parameters.productId}"/>
                <set field="payToPartyId" value="${parameters.payToPartyId}"/>
                <set field="payToPartyFirstName" value="${parameters.payToPartyFirstName}"/>
                <set field="payToPartyHead" value="${parameters.payToPartyHead}"/>
                <set field="tarjeta" value="${parameters.tarjeta}"/>
                <set field="personInfo" value="${parameters.personInfo}"/>

                <!--<service service-name="queryPersonBaseInfo" result-map="resultMap">-->
                    <!--<field-map field-name="tarjeta"/>-->
                <!--</service>-->


            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="NullCommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <html>
                                <html-template location="component://webmanager/webapp/WebManager/template/miniChat.ftl"></html-template>
                            </html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>


    <!-- Share Source -->
    <screen name="shareProduct">
        <section>
            <actions>

                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>

                <set field="productId" value="${parameters.productId}"/>

                <set field="tarjeta" from-field="parameters.tarjeta" type="String" default-value=""/>

                <set field="subscribe" from-field="parameters.subscribe" type="String" default-value="0"/>

                <service service-name="queryResourceDetail" result-map="resultMap">
                    <field-map field-name="productId"/>
                </service>

                <set field="resourceDetail" value="${resultMap.resourceDetail}"/>

                <set field="morePicture" value="${resourceDetail.morePicture}"/>


                <set field="mark" value="${resourceDetail.mark}"/>


                <!-- 微信授权登录后的回调地址 -->
                <set field="fromurl" value="http://www.lyndonspace.com/oauth2_buy_product.php?productId=${productId}"/>

            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="MobileProductCommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                <decorator-section name="body">
                    <platform-specific>
                        <html>
                            <!--<html-template location="component://webmanager/webapp/WebManager/template/shareProduct.ftl"></html-template>-->
                            <html-template location="component://webmanager/webapp/WebManager/template/shareProduct_v2.ftl"></html-template>
                        </html>
                    </platform-specific>
                </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>

    <!-- shareCategory -->
    <screen name="shareCategory">
        <section>
            <actions>
                <set field="productId" value="${parameters.productId}"/>
                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>

            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="MobileYDUICommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <html>
                                <html-template location="component://webmanager/webapp/WebManager/template/shareCategory.ftl"></html-template>
                            </html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>

    <!-- myStory -->
    <screen name="myStory">
        <section>
            <actions>
                <!--<set field="productId" value="${parameters.productId}"/>-->
                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>
                <!-- 微信授权登录后的回调地址 -->
                <set field="fromurl" value="http://www.lyndonspace.com/oauth2_buy_story.php?productId=10000"/>
                <set field="tarjeta" value="${parameters.tarjeta}"/>
            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="MobileYDUICommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <html>
                                <html-template location="component://webmanager/webapp/WebManager/template/myStory.ftl"></html-template>
                            </html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>

    <!-- myOrderDetail -->
    <screen name="myOrderDetail">
        <section>
            <actions>
                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>
                <set field="tarjeta" value="${parameters.tarjeta}"/>
                <set field="orderId" value="${parameters.orderId}"/>
                <service service-name="queryMyOrdersDetail" result-map="resultMap">
                    <field-map field-name="tarjeta"/>
                    <field-map field-name="orderId"/>
                </service>
                <set field="orderInfo" from-field="resultMap.orderInfo"/>
                <set field="orderExpressInfo" from-field="resultMap.orderExpressInfo"/>
                <set field="orderExpressName" from-field="resultMap.orderExpressName"/>
            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="MobileYDUICommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <html>
                                <html-template location="component://webmanager/webapp/WebManager/template/myOrderDetail.ftl"></html-template>
                            </html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>

    <!-- Web页面查询我的订单 -->
    <screen name="myOrder">
        <section>
            <actions>
                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>
                <set field="tarjeta" value="${parameters.tarjeta}"/>
                <service service-name="queryMyOrders" result-map="resultMap">
                <field-map field-name="tarjeta"/>
                </service>
                <set field="orderList" from-field="resultMap.orderList"/>
            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="MobileYDUICommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <html>
                                <html-template location="component://webmanager/webapp/WebManager/template/myOrder.ftl"></html-template>
                            </html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>

    <!-- Order -->
    <screen name="viewWebOrderDetail">
        <section>
            <actions>
                <set field="orderId" value="${parameters.orderId}"/>
                <set field="tarjeta" value="${parameters.tarjeta}"/>
                <property-map resource="WebManagerUiLabels.xml" map-name="uiLabel" global="true"/>
                <service service-name="queryPostalAddress" result-map="resultMap">
                <field-map field-name="tarjeta"/>
                </service>
                <set field="addressInfo" value="${resultMap.postalAddress}"/>

            </actions>
            <widgets>
                <!-- MobileYDUICommonDecorator -->
                <decorator-screen name="MobileYDUICommonDecorator" location="component://webmanager/widget/CommonScreens.xml">
                    <decorator-section name="body">
                        <platform-specific>
                            <html>
                                <html-template location="component://webmanager/webapp/WebManager/template/viewWebOrderDetail.ftl"></html-template>
                            </html>
                        </platform-specific>
                    </decorator-section>
                </decorator-screen>

            </widgets>
        </section>
    </screen>
</screens>
